
<style>
    div > #step_table {
    height: 100%;
    color: #262626;
    font-family: 'Helvetica Neue Light', 'Open Sans', Helvetica;
    font-size: 14px;
    font-weight: 300;
    padding: 1px;
}

tr.jsgrid-row {
  height: 2rem;
}

</style>

{% load static %}

<div id="settings_step_table"></div>

<script type="text/javascript">

/* tab event for side menu display control */
$('a[data-toggle="pill"]').on('shown.bs.tab', function (e) {
    var target = $(e.target).attr("href");
    switch(target){
        /* settings general tab activated */
        case "#tab_settings_general": {
            $('#btn_start_step').addClass("d-none");
            $('#btn_stop_step').addClass("d-none");
            $('#btn_pause_step').addClass("d-none");
            $('#btn_settings_save').addClass("d-none");
        } break;
        /* settings details tab activated */
        case "#tab_settings_details": {
            $('#btn_start_step').removeClass("d-none");
            $('#btn_stop_step').removeClass("d-none");
            $('#btn_pause_step').removeClass("d-none");
            $('#btn_settings_save').removeClass("d-none");
        } break;

        /* settings load tab activated */
        case "#tab_settings_load": {
            $('#btn_start_step').addClass("d-none");
            $('#btn_stop_step').addClass("d-none");
            $('#btn_pause_step').addClass("d-none");
            $('#btn_settings_save').addClass("d-none");
        } break;
    }
});

/* step tables database */
var step_db = {

    loadData: function(filter) {
        return [];
    },

    insertItem: function(insertingStep) {
        this.steps.push(insertingStep);
    },

    updateItem: function(updatingStep) { },

    deleteItem: function(deletingStep) {
        var stepIndex = $.inArray(deletingStep, this.steps);
        this.steps.splice(stepIndex, 1);
    }
};

//window.db = step_db;

step_db.commands = [
    { command: "Forward", id:0 },
    { command: "Reverse", id:1 },
    { command: "Stop", id:2 }
];

step_db.steps = [];

$("#settings_step_table").jsGrid({
    height: "430px",
    width:"100%",

    editing: true,
    sorting: false,
    paging: true,
    autoload: true,
    inserting:true,

    pageSize: 15,
    pageButtonCount: 5,

    deleteConfirm: "Do you really want to delete?",
    controller: step_db,
    fields: [
        { name: "Step", type: "number", width: 50, readOnly:false, align:"right" },
        { name: "Command", type: "select", items: step_db.commands, valueField: "id", textField: "command" },
        { name: "Time", type: "number", readOnly:false, align:"right"},
        { name: "Speed", type: "number", readOnly:false, align:"right"},
        { name: "Load", type: "number", readOnly:false, align:"right" },
        { name: "Acc/Dec", type: "number", readOnly:false, align:"right" },
        { type: "control", editButton: false, modeSwitchButton: false, deleteButtonTooltip: "Delete",}
    ]
});

  
/* page load */
window.addEventListener('DOMContentLoaded', function(){
    /* initially hide menu */
    $('#btn_start_step').addClass("d-none");
    $('#btn_stop_step').addClass("d-none");
    $('#btn_pause_step').addClass("d-none");
});

</script>