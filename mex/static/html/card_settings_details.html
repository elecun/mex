
<style>
    div > #step_table {
    height: 100%;
    color: #262626;
    font-family: 'Helvetica Neue Light', 'Open Sans', Helvetica;
    font-size: 14px;
    font-weight: 300;
    padding: 1px;
}

</style>

{% load static %}

<div id="step_table"></div>


<script type="text/javascript">

/* tab event for side menu display control */
$('a[data-toggle="pill"]').on('shown.bs.tab', function (e) {
    var target = $(e.target).attr("href");
    switch(target){
        /* settings general tab activated */
        case "#tab_settings_general": {
            $('#btn_start_step').addClass("d-none");
            $('#btn_stop_step').addClass("d-none");
            $('#btn_pause_step').addClass("d-none");
            $('#btn_settings_save').addClass("d-none");
        } break;
        /* settings details tab activated */
        case "#tab_settings_details": {
            $('#btn_start_step').removeClass("d-none");
            $('#btn_stop_step').removeClass("d-none");
            $('#btn_pause_step').removeClass("d-none");
            $('#btn_settings_save').removeClass("d-none");
        } break;

        /* settings load tab activated */
        case "#tab_settings_load": {
            $('#btn_start_step').addClass("d-none");
            $('#btn_stop_step').addClass("d-none");
            $('#btn_pause_step').addClass("d-none");
            $('#btn_settings_save').addClass("d-none");
        } break;
    }
});

var db = {

    loadData: function(filter) {
        return $.grep(this.steps, function(step) {
            return (!filter.Name || client.Name.indexOf(filter.Name) > -1)
                && (!filter.Age || client.Age === filter.Age)
                && (!filter.Address || client.Address.indexOf(filter.Address) > -1)
                && (!filter.Country || client.Country === filter.Country)
                && (filter.Married === undefined || client.Married === filter.Married);
        });
    },

    insertItem: function(insertingStep) {
        this.steps.push(insertingStep);
    },

    updateItem: function(updatingStep) { },

    deleteItem: function(deletingStep) {
        var stepIndex = $.inArray(deletingStep, this.steps);
        this.steps.splice(stepIndex, 1);
    }
};

window.db = db;

db.commands = [
    { command: "Forward", id:0 },
    { command: "Reverse", id:1 },
    { command: "Stop", id:2 }
];

db.steps = [
{
    "Step": 1,
    "Command": 0,
    "Time":1,
    "Speed":1,
    "Load":1,
    "Acc/Dec":1
}
];



$("#step_table").jsGrid({
    height: "330px",
    width: "943px",

    editing: true,
    sorting: true,
    paging: true,
    autoload: true,
    inserting:true,

    pageSize: 15,
    pageButtonCount: 5,

    deleteConfirm: "Do you really want to delete?",

    controller: db,

    fields: [
        { name: "Step", type: "number", width: 50, readOnly:false, align:"right" },
        { name: "Command", type: "select", items: db.commands, valueField: "id", textField: "command" },
        { name: "Time", type: "text", readOnly:false, align:"right"},
        { name: "Speed", type: "text", readOnly:false, align:"right"},
        { name: "Load", type: "text", readOnly:false, align:"right" },
        { name: "Acc/Dec", type: "text", readOnly:false, align:"right" },
        { type: "control", editButton: false, modeSwitchButton: false, deleteButtonTooltip: "Delete",}
    ]
});

  
/* page load */
window.addEventListener('DOMContentLoaded', function(){
    /* initially hide menu */
    $('#btn_start_step').addClass("d-none");
    $('#btn_stop_step').addClass("d-none");
    $('#btn_pause_step').addClass("d-none");
});

</script>