

<a class="btn btn-app btn-app-side invisible mb-0" id="btn_empty">
</a>

<a class="btn btn-app btn-app-side bg-secondary shadow" id="btn_mc_forward">
  <i class="fas fa-undo"></i> {{menu_ko.status_manual_control_forward}}
</a>

<a class="btn btn-app btn-app-side bg-secondary shadow" id="btn_mc_reverse">
  <i class="fas fa-redo"></i> {{menu_ko.status_manual_control_reverse}}
</a>

<a class="btn btn-app btn-app-side bg-secondary shadow" id="btn_mc_stop">
  <i class="fas fa-stop"></i> {{menu_ko.status_manual_control_stop}}
</a>

<a class="btn btn-app btn-app-side bg-success shadow" id="btn_zeroset">
  <i class="fas fa-slash"></i> {{menu_ko.zeroset}}
</a>


<script language="javascript">

/* page load */
window.addEventListener('DOMContentLoaded', function(){
    
});

/* mqtt command for zeroset */
function mqtt_command_zeroset(){
  if(mqtt_connected){
    mqtt_client.publish("mex/relay/ctrl", JSON.stringify({"p4":1}), 2);
    setTimeout(() => 
    mqtt_client.publish("mex/relay/ctrl", JSON.stringify({"p4":0}), 2)
    , 1000);
  }
}

/* mqtt command for forward */
function mqtt_command_forward(){
  if(mqtt_connected){
    mqtt_client.publish("mex/plc/ctrl", JSON.stringify({"command":"move_cw"}), 2);
  }
}

/* mqtt command for reverse */
function mqtt_command_reverse(){
  if(mqtt_connected){
    mqtt_client.publish("mex/plc/ctrl", JSON.stringify({"command":"move_ccw"}), 2);
  }
}

/* mqtt command for stop */
function mqtt_command_stop(){
  if(mqtt_connected){
    mqtt_client.publish("mex/plc/ctrl", JSON.stringify({"command":"move_stop"}), 2);
  }
}

/* call zeroset event */
document.getElementById('btn_zeroset').addEventListener('click', function(){
  mqtt_command_zeroset();
});

/* call forward event */
document.getElementById('btn_mc_forward').addEventListener('click', function(){
  mqtt_command_forward();
});

/* call reverse event */
document.getElementById('btn_mc_reverse').addEventListener('click', function(){
  mqtt_command_reverse();
});

/* call stop event */
document.getElementById('btn_mc_stop').addEventListener('click', function(){
  mqtt_command_stop();
});

</script>