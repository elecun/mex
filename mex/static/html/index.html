{% extends "template/base.html" %} 

{% load static %}

{% block css %}
  <link rel="stylesheet" href="{% static 'plugins/jsgrid/jsgrid.min.css' %}">
  <link rel="stylesheet" href="{% static 'plugins/jsgrid/jsgrid-theme.min.css' %}">
  <link rel="stylesheet" href="{% static 'plugins/bootstrap-toggle/css/bootstrap-toggle.min.css' %}">
  <link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css' %}">
  <link rel="stylesheet" href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}"></script>
  <style>

    /* display alignment with padding */
    .content {
      padding: 15px 7px !important;
    }

    /* side menu button */
    .btn-app-side {
      margin: 0 0 10px 0px !important;
      min-width: 110px;
  }
    </style>
{% endblock %}

{% block javascript %}
<script type="text/javascript" src="{% static 'plugins/jsgrid/jsgrid.min.js' %}"></script>
<script type="text/javascript" src="{% static 'plugins/jquery-knob/jquery.knob.min.js' %}"></script>
<script type="text/javascript" src="{% static 'plugins/bootstrap-toggle/js/bootstrap-toggle.min.js' %}"></script>
<script type="text/javascript" src="{% static 'plugins/moment/moment.min.js' %}"></script>
<script type="text/javascript" src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
<script type="text/javascript" src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
<script type="text/javascript" src="{% static 'plugins/echarts/echarts.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/shortcut.js' %}"></script>

<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', function(){
    if(mqtt_client){
      mqtt_client.publish("mex/command", "hello", 2);
    }
    else {
      alert("not connected");
    }
  });

  /* MQTT commands */
  window.addEventListener("command", function(event){
        switch(event.data.function){
            case "program_start": { 
                // on_device_manual_control(url, event.data.args);
            } break; 
            case "program_pause" : {
            } break;
            case "program_stop" : { 
            } break; 
            case "set_zero" : { 
            } break; 
            case "rotate_forward" : { 
            } break;
            case "rotate_reverse" : { 
            } break;
            case "rotate_stop" : { 
            } break;
            case "motor_on":{
            } break;
            case "motor_off":{
            } break;
            case "side_load_on":{
            } break;
            case "side_load_off":{
            } break;
        }
    });

/* program start command */
function command_program_start(){
  mqtt_client.publish("mex/command/program_start", json.dump({}), 2);
}


</script>

{% endblock %}

{% block contents %}
  <!-- for hidden configurations -->
  {% include 'modal_hconf.html' %}
  <!-- for chart data open -->
  {% include 'modal_chart_open.html' %}
  <!-- for new settings -->
  {% include 'modal_settings_new.html' %}

<!-- main contents -->
<div class="content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-6 pr-0">
        {% include 'card_settings.html' %}
      </div>
      <div class="col-lg-1 pl-0">
        {% include 'card_settings_menu.html' %}
      </div>
      <div class="col-lg-4 pr-0">
        {% include 'card_status.html' %}
      </div>
      <div class="col-lg-1 pl-0">
        {% include 'card_status_menu.html' %}
      </div>
    </div>
    <div class="row">
      <div class="col-lg-11 pr-0">
        {% include 'card_chart.html' %}
      </div>
      <div class="col-lg-1 pl-0">
        {% include 'card_chart_menu.html' %}
      </div>
    </div>
  </div>
</div>

{% endblock %}


{% block post_javascript %}
{% endblock %}